PR#6340: Incorrect handling of \r when processing "Windows" source files
(Damien Doligez, report by David Allsopp)